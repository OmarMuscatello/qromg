(this.webpackJsonpqromg=this.webpackJsonpqromg||[]).push([[0],[,function(e,t,a){e.exports={root:"ProgressBar_root__3jRL8",fill:"ProgressBar_fill__3mdsj",fillSecondary:"ProgressBar_fillSecondary__25eOe",fillPrimary:"ProgressBar_fillPrimary__1XRo_","mat-progress-bar-primary-indeterminate-translate":"ProgressBar_mat-progress-bar-primary-indeterminate-translate__kukYN","mat-progress-bar-primary-indeterminate-scale":"ProgressBar_mat-progress-bar-primary-indeterminate-scale__3m7A8","mat-progress-bar-secondary-indeterminate-translate":"ProgressBar_mat-progress-bar-secondary-indeterminate-translate__3gtFN","mat-progress-bar-secondary-indeterminate-scale":"ProgressBar_mat-progress-bar-secondary-indeterminate-scale__15GgB"}},function(e,t,a){e.exports={root:"InputBox_root__Vfoly",form:"InputBox_form__3CKzU",input:"InputBox_input__1pD39",btnGenerate:"InputBox_btnGenerate__15SeU",progressBar:"InputBox_progressBar__1_PVE"}},function(e,t,a){e.exports={root:"Output_root__dpcWk",container:"Output_container__3lPpV",img:"Output_img__37r-k",btnDownload:"Output_btnDownload__3Qy6L"}},function(e,t,a){e.exports={root:"Snackbar_root__3ErI0",show:"Snackbar_show__nJxcA",hasAction:"Snackbar_hasAction__2hBaF",action:"Snackbar_action__3dSnk"}},,,function(e,t,a){e.exports={root:"Header_root__2i1D9",title:"Header_title__2rmfn"}},,function(e,t,a){e.exports={app:"App_app__2v81I"}},function(e,t,a){e.exports=function(){return new Worker(a.p+"9a3633351a1a96cf06a9.worker.js")}},function(e,t,a){e.exports={root:"Button_root__22lWs"}},,function(e,t,a){e.exports=a(22)},,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),o=a(9),i=a.n(o),l=a(7),c=a.n(l),d=()=>r.a.createElement("header",{className:c.a.root},r.a.createElement("h1",{className:c.a.title},"QROMG"),r.a.createElement("p",null,'Type a text in the box below and click the "Generate!" button. The QR Code will appear below it.'));const u=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));let h=null,m=null;const p=new Promise((e,t)=>{h=e,m=t});function g(e){navigator.serviceWorker.register(e).then(e=>{e.waiting?h({updateDownloaded:!0,registration:e}):e.onupdatefound=()=>{const t=e.installing;null!=t&&(t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?h({updateDownloaded:!0,registration:e}):h({availableOffline:!0,registration:e}))})}}).catch(e=>{m(e)})}var f=a(10),_=a.n(f);class v{constructor(){this._onMessageReceived=e=>{let t=e.data;if("create"===t.action){const e=this._promises[t.id];t.success?e.resolve(t.result):e.reject(),delete this._promises[t.id]}},this._worker=new _.a,this._worker.addEventListener("message",this._onMessageReceived),this._promises={}}generateQrCode(e){const t=this._generateId(),a=new Promise((e,a)=>{this._promises[t]={resolve:e,reject:a}});return this._worker.postMessage({id:t,action:"create",content:e}),a}_generateId(){return"_"+Math.random().toString(36).substr(2,9)}}var w=a(5),b=a(12);function k(e){return null===e||"undefined"===typeof e}function E(){let e="";for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];for(var r=0,s=a;r<s.length;r++){const t=s[r];if(!k(t))if(t instanceof Array)e+=" "+t.join(" ");else if("object"===typeof t)for(var o=0,i=Object.entries(t);o<i.length;o++){const t=i[o];var l=Object(b.a)(t,2);const a=l[0];l[1]&&(e+=" "+a)}else e+=" "+t}return e}const x=(()=>{const e=document.createElement("div"),t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"};for(const a in t)if(void 0!==e.style[a])return t[a];return"transitionend"})();var y=a(11),B=a.n(y),R=e=>{let t=e.className,a=e.children,n=Object(w.a)(e,["className","children"]);return r.a.createElement("button",Object.assign({className:E(B.a.root,t)},n),a)},S=a(1),N=a.n(S);var C=e=>{let t=e.className,a=void 0===t?"":t,n=e.progress,s=Object(w.a)(e,["className","progress"]);const o=k(n);let i=null;if(!o){const e=function(e,t,a){return Math.max(t,Math.min(a,e))}(n,0,100);i={transform:"scaleX(".concat((e/100).toFixed(4),")")}}return r.a.createElement("div",Object.assign({className:E(N.a.root,a),role:"progressbar",mode:o?"indeterminate":"determinate","aria-valuenow":n,"aria-valuemax":100,"aria-valuemin":0},s),r.a.createElement("div",{className:E(N.a.fill,N.a.fillPrimary),style:i}),r.a.createElement("div",{className:E(N.a.fill,N.a.fillSecondary)}))},P=r.a.createContext({message:{},show:()=>{},hide:()=>{}}),T=a(2),M=a.n(T);class O extends n.Component{constructor(){super(...arguments),this.state={inputValue:"https://omarmuscatello.github.io/qromg/"},this.inputElemRef=r.a.createRef(),this.inputChangeHandler=e=>{let t=e.currentTarget;this.setState({inputValue:t.value})},this.formSubmitHandler=e=>{e.preventDefault(),""!==this.state.inputValue?this.props.generateHandler(this.state.inputValue):this.inputElemRef.current.focus()}}shouldComponentUpdate(e,t){return this.state.inputValue!==t.inputValue||this.props.generating!==e.generating}render(){return r.a.createElement("div",{className:M.a.root},r.a.createElement("form",{className:M.a.form,onSubmit:this.formSubmitHandler},r.a.createElement("input",{"aria-label":"Input text",className:M.a.input,type:"text",autoComplete:"off",onChange:this.inputChangeHandler,value:this.state.inputValue,disabled:this.props.generating,ref:this.inputElemRef,placeholder:"Type text here"}),r.a.createElement(R,{type:"submit",className:M.a.btnGenerate,disabled:this.props.generating},"GENERATE!")),r.a.createElement(C,{className:M.a.progressBar,hidden:!this.props.generating}))}}O.contextType=P;var j=a(3),I=a.n(j);class D extends n.PureComponent{constructor(e){super(e),this.downloadImage=()=>{const e=this.canvasRef.current,t=this.imageRef.current,a=this.linkRef.current;e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),a.href=e.toDataURL("image/png").replace("data:image/png","data:application/octet-stream"),a.click()},this.canvasRef=r.a.createRef(),this.imageRef=r.a.createRef(),this.linkRef=r.a.createRef()}render(){const e=this.props.imgSrc,t=k(e)||0===e.length;return r.a.createElement("div",{className:I.a.root},r.a.createElement("a",{ref:this.linkRef,href:"#",download:"qrcode.png",hidden:!0}),r.a.createElement("canvas",{ref:this.canvasRef,hidden:!0}),r.a.createElement("div",{className:I.a.container,hidden:t},r.a.createElement("img",{ref:this.imageRef,className:I.a.img,src:e,alt:"Generated QR Code"}),r.a.createElement(R,{className:I.a.btnDownload,onClick:this.downloadImage},"DOWNLOAD")))}}var A=a(4),W=a.n(A);const H=4e3;class Q extends n.Component{constructor(e){super(e),this.state={visible:!1,message:null},this.rootRef=Object(n.createRef)()}componentDidUpdate(){var e;this.state.visible&&setTimeout(()=>{this.rootRef.current.addEventListener(x,this.props.onHideComplete,{once:!0}),this.setState({visible:!1})},null!==(e=this.state.message.hideDelay)&&void 0!==e?e:H)}static getDerivedStateFromProps(e,t){return e.message!==t.message&&null!==e.message?{visible:!0,message:e.message}:t}shouldComponentUpdate(e,t){return this.state.message!==t.message||this.state.visible!==t.visible}render(){const e=this.state,t=e.message,a=e.visible;return r.a.createElement("div",{ref:this.rootRef,className:E(W.a.root,{[W.a.show]:a,[W.a.hasAction]:null===t||void 0===t?void 0:t.action}),"aria-hidden":!this.state.visible},r.a.createElement("span",null,null===t||void 0===t?void 0:t.text),(null===t||void 0===t?void 0:t.action)&&r.a.createElement("button",{className:W.a.action,onClick:t.action.handler},t.action.text))}}class V extends n.Component{constructor(){super(...arguments),this.hideCompleteHandler=()=>{this.context.hide()}}render(){return r.a.createElement(Q,{message:this.context.message,onHideComplete:this.hideCompleteHandler})}}V.contextType=P;class G extends n.Component{constructor(){super(...arguments),this.showProgressBarTimeout=null,this.workerManager=null,this.state={generating:!1,output:""},this.generate=e=>{this.showProgressBarTimeout=setTimeout(()=>{this.setState({generating:!0,output:""})},100),this.workerManager.generateQrCode(e).then(e=>{this.setState({output:e})}).catch(e=>{console.log("[Main] Error while generating QR Code")}).then(()=>{clearTimeout(this.showProgressBarTimeout),this.setState({generating:!1})})}}componentDidMount(){this.workerManager=new v,p.then(e=>{let t=e.availableOffline,a=e.updateDownloaded,n=e.registration;t?this.context.show({text:"Now available offline!"}):a&&this.context.show({text:"An update is available",action:{text:"Reload page",handler:()=>{const e=n.waiting;e&&(e.addEventListener("statechange",e=>{"activated"===e.target.state&&window.location.reload()}),e.postMessage({type:"SKIP_WAITING"}))}}})}).catch(e=>{console.log("Error during service worker registration:",e)})}render(){return r.a.createElement("main",null,r.a.createElement(O,{generateHandler:this.generate,generating:this.state.generating}),r.a.createElement(D,{imgSrc:this.state.output}),r.a.createElement(V,null))}}G.contextType=P;class L extends n.Component{constructor(){super(...arguments),this.state={snackBarMessage:null},this.snackBarQueue=[],this.showSnackbar=e=>{null===this.state.snackBarMessage?this.setState({snackBarMessage:e}):this.snackBarQueue.push(e)},this.hideSnackbar=()=>{if(0===this.snackBarQueue.length)this.setState({snackBarMessage:null});else{const e=this.snackBarQueue.shift();this.setState({snackBarMessage:e})}}}render(){return r.a.createElement(P.Provider,{value:{message:this.state.snackBarMessage,show:this.showSnackbar,hide:this.hideSnackbar}},r.a.createElement("div",{className:i.a.app},r.a.createElement(d,null),r.a.createElement(G,null)))}}a(21);const U=document.getElementById("root");Object(s.render)(r.a.createElement(L,null),U),function(){if("serviceWorker"in navigator){if(new URL("/qromg",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/qromg","/service-worker.js");u?(!function(e){fetch(e,{headers:{"Service-Worker":"script"}}).then(t=>{const a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):g(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a services worker. To learn more, visit https://bit.ly/CRA-PWA")})):g(e)})}}()}],[[13,1,2]]]);
//# sourceMappingURL=main.6dabba5c.chunk.js.map